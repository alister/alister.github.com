
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Your own 'Jenkins' for PHP with Composer - Professional Blog</title>
  <meta name="author" content="Alister Bulman">

  
  <meta name="description" content="I&rsquo;m a big fan of CI &ndash; testing, code-coverage, mess-detection and coding standards. I like to automate as much as I can as well, becuase a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alister.github.com/blog/2013/06/03/your-own-jenkins-for-php-with-composer/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Professional Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37346894-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Professional Blog</a></h1>
  
    <h2>A few things I've been up to</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:alister.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
  <li><a href="/presentations/">Presentations</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Your Own 'Jenkins' for PHP With Composer</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-03T21:30:00+01:00" pubdate data-updated="true">Jun 3<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&rsquo;m a big fan of CI &ndash; testing, code-coverage, mess-detection and coding standards. I like to automate as much as I can as well, becuase a) it&rsquo;s really neat to see tests and code-coverage output going green, and b) I think it genuinely leads to better software.</p>

<p>Setting up a full Jenkins system is a bit overkill for just my home projects though, and I&rsquo;d also like to see how I&rsquo;m doing between git-pushes to the main repository at work as well. So, I&rsquo;ve put together a system, bult on top of <a href="http://getcomposer.org/">Composer</a> that lets me do just that.</p>

<!-- more -->


<p><a href="/assets/201306composer-update.png"><img class="right" src="/assets/201306composer-update.thumb.png" title="Some people are trying to get it" alt="A week"></a></p>

<p>This <a href="http://github.com/alister/personal-ci">&lsquo;personal-ci&rsquo;</a> project, also allows for setting up a full CI-configuration as part of the composer.json file, so you can be sure which versions (ie: up to date) of <a href="https://github.com/sebastianbergmann/phpunit/,%20[PDepend](http://pdepend.org/">PHPunit</a>, <a href="https://github.com/sebastianbergmann/phpcpd">PHPCPD</a> and the other related tools, are being run. It&rsquo;s not, however, quite as easy as just listing all the PHP-based code-quality projects into the <code>composer.json</code> file.</p>

<p>The problem with just listing them all out, is getting a configuration that works</p>

<ul>
<li>with composer, out of the box, and</li>
<li>takes into account different versions of some support libraries being required by different tools</li>
</ul>


<p>There are two that require a little more work than the others:</p>

<ul>
<li>phpcb &ndash; there is a fork by Github covex-nn with Composer support (and avoiding some older PEAR-based libraries)</li>
<li>zetacomponents/console-tools &ndash; Unfortunately, Covex-nn&rsquo;s repo requires a different version of ZC&rsquo;s console-tools.</li>
</ul>


<p>So, to get the best of both, requires a bit of a hack, hence the <code>&ldquo;as 1.9999&rdquo;</code> part of the file, below.</p>

<figure class='code'><figcaption><span>&#8220;composer.json&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;alister/personalci-demo&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;An example CI-style output&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;license&quot;</span><span class="o">:</span> <span class="s2">&quot;CC-BY-SA-3.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;require&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;rhumsaa/uuid&quot;</span><span class="o">:</span> <span class="s2">&quot;2.*&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="s2">&quot;require-dev&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;phpunit/phpunit&quot;</span><span class="o">:</span> <span class="s2">&quot;&gt;=3.7&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;squizlabs/php_codesniffer&quot;</span><span class="o">:</span> <span class="s2">&quot;&gt;=1.5.0RC2&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;pdepend/pdepend&quot;</span><span class="o">:</span> <span class="s2">&quot;dev-master&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;phpmd/phpmd&quot;</span><span class="o">:</span> <span class="s2">&quot;dev-master&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;sebastian/phpcpd&quot;</span><span class="o">:</span> <span class="s2">&quot;dev-master&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;phploc/phploc&quot;</span><span class="o">:</span> <span class="s2">&quot;dev-master&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;covex-nn/phpcb&quot;</span><span class="o">:</span> <span class="s2">&quot;dev-fork&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;zetacomponents/console-tools&quot;</span><span class="o">:</span> <span class="s2">&quot;dev-master as 1.9999&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;mockery/mockery&quot;</span><span class="o">:</span> <span class="s2">&quot;&gt;=0.8&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="s2">&quot;autoload&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;psr-0&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;ProjectName&quot;</span><span class="o">:</span> <span class="s2">&quot;src/&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So, with this, composer.json file, and a &lsquo;composer update&rsquo;, you get all these tools installed into the <code>vendor/bin/</code> directory</p>

<ul>
<li>vendor/bin/phpmd &ndash;> ../phpmd/phpmd/src/bin/phpmd</li>
<li>vendor/bin/phpcpd &ndash;> ../sebastian/phpcpd/composer/bin/phpcpd</li>
<li>vendor/bin/phpunit &ndash;> ../phpunit/phpunit/composer/bin/phpunit</li>
<li>vendor/bin/phploc &ndash;> ../phploc/phploc/composer/bin/phploc</li>
<li>vendor/bin/phpcs &ndash;> ../squizlabs/php_codesniffer/scripts/phpcs</li>
<li>vendor/bin/pdepend &ndash;> ../pdepend/pdepend/src/bin/pdepend</li>
<li>vendor/bin/phpcb &ndash;> ../covex-nn/phpcb/bin/phpcb</li>
</ul>


<p>You can put those vendor/bin paths into your test-runner. For full compatibility with Jenkins, I added to, and edited the sample <code>build.xml</code> file from <a href="http://jenkins-php.org/">http://jenkins-php.org/</a>. A snippet of that is below, but the full version is in the <a href="http://github.com/alister/personal-ci/">Github Repo</a>.</p>

<figure class='code'><figcaption><span>&#8220;build.xml (fragment)&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">&quot;Personal-CI project&quot;</span> <span class="na">default=</span><span class="s">&quot;build&quot;</span><span class="nt">&gt;</span>
</span><span class='line'> <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;build&quot;</span>
</span><span class='line'>   <span class="na">depends=</span><span class="s">&quot;prepare,composer,lint,phploc,pdepend,phpmd-ci,phpcs-ci,phpcpd,phpunit,phpcb&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'> <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;build-parallel&quot;</span>
</span><span class='line'>   <span class="na">depends=</span><span class="s">&quot;prepare,lint,tools-parallel,phpunit,phpcb&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c">&lt;!-- ... more ... --&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;composer&quot;</span> <span class="na">description=</span><span class="s">&quot;Installing dependencies&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">&quot;wget&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;-nc&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;http://getcomposer.org/composer.phar&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/exec&gt;</span>
</span><span class='line'>    <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">&quot;php&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;composer.phar&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;install&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!--</span>
</span><span class='line'><span class="c">        # Use the lockfile versions only, if it exists (fall back to .json) --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;--dev&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- includes mockery and all the other QA-tools --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;--prefer-dist&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!--</span>
</span><span class='line'><span class="c">            ## download/cache a local .zip file for use --&gt;</span>
</span><span class='line'>      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;--no-progress&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="c">&lt;!--arg value=&quot;- -install-suggests&quot; /--&gt;</span>
</span><span class='line'>      <span class="c">&lt;!--arg value=&quot;- -optimize-autoloader&quot; /</span>
</span><span class='line'><span class="c">            ## we don&#39;t usually optimise deployment --&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/exec&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'>
</span><span class='line'> <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;lint&quot;</span> <span class="na">description=</span><span class="s">&quot;Perform syntax check of sourcecode files&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;apply</span> <span class="na">executable=</span><span class="s">&quot;php&quot;</span> <span class="na">failonerror=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>   <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">&quot;-l&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>   <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${basedir}/&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">&quot;**/*.php&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;exclude</span> <span class="na">name=</span><span class="s">&quot;vendor/&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- Don&#39;t check in vendors/</span>
</span><span class='line'><span class="c">        - libraries are expected to be tested independently --&gt;</span>
</span><span class='line'>    <span class="nt">&lt;modified</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- Only checking modified files --&gt;</span>
</span><span class='line'>   <span class="nt">&lt;/fileset&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c">&lt;!-- ... more ... --&gt;</span>
</span><span class='line'><span class="nt">&lt;/project&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>With that in place, you can run &lsquo;ant&rsquo; to run the whole system and it generates full-code coverage web-pages for all the files it tests, and imports all the other checks into a Code-Browser. Having that shown up via an actual website though, and not just as a file-based URL is very helpful.</p>

<p>So &ndash; I have a simple Apache-Vhost that points to a directory. Within that directory I have symlinks to the <code>build/</code> directories of my other local projects &ndash; which allows for full AJAXified access to the CodeBrowsers in each one.</p>

<h2>But wait &ndash; there&rsquo;s more!</h2>

<p>There&rsquo;s not just one way to run the tests in the personal-ci repo, but three!</p>

<h3>./runTests.sh</h3>

<p>Sometimes, its handy to be able to quickly run PHPUnit, editing in one window, and then rerunning &ndash; particularly when you are writing tests as you go, and would like to see nearly instant results.</p>

<p>For that, For many years now, I&rsquo;ve been writing a little shell-script, ./runTests.sh:</p>

<figure class='code'><figcaption><span>&#8220;runTests.sh&#8221; &#8220;(cut-down version)&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'>clear
</span><span class='line'>mkdir -p ./build/logs ./build/coverage/ ./logs/ ./tmp/
</span><span class='line'><span class="nv">TEST</span><span class="o">=</span><span class="s2">&quot;$@&quot;</span>
</span><span class='line'><span class="c">#VERBOSE=&quot;--verbose &quot;</span>
</span><span class='line'><span class="c">#COVERAGE=&quot;--coverage-html=../build/coverage&quot;</span>
</span><span class='line'><span class="nv">COLORS</span><span class="o">=</span><span class="s2">&quot;--colors&quot;</span>
</span><span class='line'><span class="nv">PHPUNIT</span><span class="o">=</span><span class="s2">&quot;vendor/bin/phpunit&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">time</span> <span class="se">\</span>
</span><span class='line'>  <span class="nv">$PHPUNIT</span> <span class="nv">$GROUP</span> <span class="nv">$COLORS</span> <span class="nv">$VERBOSE</span> <span class="nv">$CONF</span> <span class="nv">$MORE</span> <span class="nv">$COVERAGE</span> <span class="nv">$TEST</span>
</span><span class='line'><span class="c"># if not running in a pipe (eg, &#39;less&#39;), re-run on &#39;Enter&#39;</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -t 1 <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>  <span class="nb">echo</span> -n <span class="s2">&quot;press [Enter] to re-run:&gt; &quot;</span>
</span><span class='line'>  <span class="nb">read </span>x
</span><span class='line'>  <span class="nb">exec</span> <span class="nv">$0</span> <span class="nv">$@</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>Again, a slightly more complete version of that is in the <a href="http://github.com/alister/personal-ci/">Github Repo</a>.</p>

<h3>guard / Guardfile</h3>

<p>Finally, one more &ndash; quite recent addition to my testing arsenal. This one hails from the Ruby world. Included in the repository is a <code>Gemfile</code> (which is broadly speaking a Ruby equivilent of PHP&rsquo;s <code>composer.json</code>), so that you can run <code>bundle install</code> to install (that Gemfile also includes Capistrano, which I use to deploy PHP code to my server). There&rsquo;s a little more on Capistrano on my <a href="http://phpscaling.com/2011/11/24/deployment-with-capistrano-the-gotchas/">phpscaling.com</a> blog.</p>

<p>With &lsquo;Guard&rsquo; installed, the provided &lsquo;Guardfile&rsquo; sets up a watch for changes to files named like <code>tests/*Test.php</code> &ndash; and to some others that are the original source file equivilents to the tests. Should either one change, the matching tests are also run. To start, just run &lsquo;guard&rsquo; (though you might need to run &lsquo;bundle exec guard&rsquo;).</p>

<p>If a test fails, then it will remember that, and keep running it when the source file is edited, and saved. When that test once again succeeds, it will then go and re-run the rest of the tests.</p>

<p>Having &lsquo;guard&rsquo; running in one window while you are editing the project in your editor can really speed up testing while your are developing &ndash; the tests are run almost as soon as you have finished writing them.</p>

<p>It&rsquo;s a little bit easy to confuse however, and it&rsquo;s crashed on my a few times requiring a manual &lsquo;kill&rsquo; of the process, so it is a tool I&rsquo;ll use only while doing some pretty hard-core test-driven development sessions. It also does not like any output while you are testing (which in PHPUnit would usually just be printed, abeit messing up the flow of the dots on screen) &ndash; so for that, I&rsquo;ll just fall back on the runTests.sh script, that I show above.</p>

<p>To make sure that the tests run quickly, I have also added to the repo, a <code>phpunit.xml</code> configuration &ndash; one that does almost exactly the same as the default, but without code coverage being generated. With good unit-tests, that are not doing too much (or, at least, that have some long-duration tests being excluded with @group annotations or test-suites), even when Guard runs all the tests, it&rsquo;s just taking a few seconds.</p>

<h2>Thats How I Test</h2>

<p>So, there&rsquo;s a few good, and different, options for testing.</p>

<ul>
<li>Ant and a build.xml file runs from the command line &ndash; or in Jenkins &ndash; to generate full code coverage and other reports listed in the CodeBrowser</li>
<li>runTests.sh &ndash; a quick shell script that can rerun your tests, and build code coverage HTML output on demand</li>
<li>Guard &ndash; a Ruby-based system to run tests as soon as you&rsquo;ve saved the file.</li>
</ul>


<p>And having all the QA-tools pulled in with Composer means that you know they are installed, and exactly what version is being run.</p>

<p>Happy testing!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Alister Bulman</span></span>

      








  


<time datetime="2013-06-03T21:30:00+01:00" pubdate data-updated="true">Jun 3<span>rd</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/composer/'>composer</a>, <a class='category' href='/blog/categories/continuous-integration/'>continuous-integration</a>, <a class='category' href='/blog/categories/jenkins/'>jenkins</a>, <a class='category' href='/blog/categories/php/'>php</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://alister.github.com/blog/2013/06/03/your-own-jenkins-for-php-with-composer/" data-via="alister_b" data-counturl="http://alister.github.com/blog/2013/06/03/your-own-jenkins-for-php-with-composer/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/06/01/some-people-are-trying-to-get-it/" title="Previous Post: Some people are trying to get it">&laquo; Some people are trying to get it</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/06/03/your-own-jenkins-for-php-with-composer/">Your own 'Jenkins' for PHP with Composer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/01/some-people-are-trying-to-get-it/">Some people are trying to get it</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/17/not-having-your-developers-quit-on-you-as-a-service/">Not having your developers quit on you - as a service</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/07/why-i-like-tinydns/">Why I like djbdns & tinydns</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/01/a-mysql-day-one-day-freelancing/">a MySQL optimisation Story</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("alister_b", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/alister_b" class="twitter-follow-button" data-show-count="false">Follow @alister_b</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/alister">@alister</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'alister',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/101781345476843821407?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>Stack Overflow</h1>
  <a href="http://stackoverflow.com/users/6216/alister-bulman">
  <img src="http://stackoverflow.com/users/flair/6216.png" width="208" height="58" alt="profile for alister-bulman at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for alister-bulman at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
  </a>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Alister Bulman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
